<!doctype html>
<html>
	<head>
		<title>
			La Protection des Actifs grâce à une bonne Gestion du Secret
		</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="stylesheet" href="css/custom.css">
		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">
		<link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">


				<!--section data-background="#283546"-->
				<section data-background="img/doors_new.jpg">
          <h2>
              La Protection des Actifs grâce à une bonne Gestion du Secret
          </h2>

          <aside class="notes">
						Bonjour, je m'appel Tristan Pinaudeau, je suis alternant en 5ème
						année de l'EPSI Bordeaux et ingénieur SRE Junior à Cdiscount. Durant
						les 20 prochaines minutes, je vais vous soutenir le mémoire dont
						vous voyez l'intitulé : "La protection des actifs grâce à une bonne
						gestion du secret" Nous allons parler de sécurité bien sur mais
						aussi de DevOps, de virtualisation et de pratiques de développement.
						L'intéret de cette présentation est d'étendre le mémoire pour
						présenter un nouvel aspect du sujet qui n'a pas encore été traitée.
						Après un rapide rappel des éléments clef du projet CERBERE qui est
						exposé dans le mémoire, nous poserons une nouvelle problématique qui
						n'est qu'un sous-ensemble de celle qui s'affiche devant vous. Nous
						développerons alors 2 parties qui tenterons de répondre à cette
						question spécifique pour conclure sur une synthèse qui replacera les
						éléments aportés dans le cadre d'origine de ce mémoire.

						POURQUOI CHOISI SRE ?
						MONTRER AVEC POINTEUR
						EXPLIQUER BEAUCOUP
						RÉSUMÉ DE L'ALTERNANCE
          </aside>
        </section>


				<!-- RAPPELS -->
				<section>

          <section>
						<h3>Rappels</h3>

            <aside class="notes">
							Tout de suite ces quelques rappels qui vont synthètiser le contenu
							du mémoire pour donner un point d'entré à cette soutenance
            </aside>
          </section>


          <section>
						<blockquote>
							&ldquo; Pour une entreprise comptant plusieurs dizaines d’équipes
							aux méthodes et cultures diverses, commment limiter l’exposition
							aux cyberattaques de ses actifs et de son image en évitant la
							fuite de ses secrets sensibles ? &rdquo;
						</blockquote>

						<aside class="notes">
							D'abord, rappelons la problématique.
							...lire...
							Découpons cette problématique.
						</aside>
          </section>


					<section>
						<blockquote>
							&ldquo; Une entreprise comptant plusieurs dizaines d'équipes
							&rdquo;
						</blockquote>

						<img src="img/cdiscount.png" height="300" />

						<aside class="notes">
							Cette large entreprise c'est Cdiscount. Le leader francais du
							commerce électronique à été le sujet d'experimentation de ce
							mémoire. J'ai pu y entreprendre en autonomie et à temps plein la 
							mise en place d'un projet de gestion des secrets. L'équipe qui m'a
							acceuilli pour cette tâche est la CT-Intégration. Une équipe
							polyvalente et talentueuse d'une petite dizaine de personnes qui
							travaillent à l'intégration de plateformes de sécurité et de
							messaging au sein de Cdiscount et en utilisant les méthodes DevOps
						</aside>
					</section>


 					<section>
						<blockquote>
							&ldquo; Méthodes et cultures diverses &rdquo;
						</blockquote>

						<img src="img/teams_spirit.svg" height="200" />

						<aside class="notes">
							Ensuite, la problématique parle de méthodes et cultures diverses
							Cette constatation peut être faite dans toutes les entreprises,
							des équipes différentes ont des approches différentes pour
							résoudre le même problème. C'est souvent un point positif qui à
							tendance à encourager l'innovation et la création de valeur.
							Pourtant, dans le cadre des problèmes de sécurité, cette
							hétérogénéité des pratiques rend très difficile le Management de
							la sécurité des systèmes d'information si cher à ISO 27001.
							Il nous faut une solution qui arrive à embrasser la pluralité des
							cultures d'équipes tout en permettant une unification de la
							gestion des secrets.
						</aside>
					</section>


					<section>
						<blockquote>
							&ldquo; Limiter l'exposition aux cyberattaques &rdquo;
						</blockquote>

						<img src="img/hacker.svg" height="200" />

						<aside class="notes">
							L'objectif final c'est naturellement de limiter l'exposition aux
							cyberattaques en minimisant les éléments confidentiels auquel un
							cybercriminel pourrait avoir accès.
						</aside>
					</section>


					<section>
						<blockquote>
							&ldquo; Protéger les actifs et l'image &rdquo;
						</blockquote>

						<img class=fragment src=img/wallet.svg height=150 />
						<span class=vertical-separator></span>
						<img class=fragment src=img/social_dashboard.svg height=150 />

						<aside class="notes">
							Par la, ce que veux protéger à tout prix une entreprise du secteur
							du commerce en ligne c'est biensure ses actifs mais aussi et
							surtout son image. Depuis les révélations d'edward snowden il y à
							quelques année et plus récemment la mise en place du RGPD en
							europe, l'opinion publique est de plus en plus sensible à la
							sécurité de ses donnée privée. La sécurité est donc une contraine
							pour Cdiscount mais également un potentiel argument marketing face
							aux géant étrangés qui sont déja largement été critiqués sur ce
							sujet.
						</aside>
					</section>


					<section>
						<blockquote>
							&ldquo; Empêcher la fuite des secrets sensibles &rdquo;
						</blockquote>

						<img class=fragment src="img/credit_card.svg" height=150 />
						<span class=vertical-separator></span>
						<img class=fragment src="img/strategic_secret.svg" height=150 />

						<aside class="notes">
							Il faut donc à tout prix protéger les secrets sensibles, ceux des
							clients biensure (ex: doonnées banquaires), mais aussi les secrets
							stratégiques qui sont les moteurs de l'activité de toute
							entreprise. Parmis ces secrets on retrouve le contenu des bases de
							données biensure mais aussi le code source et même les rapports
							des équipes de datascience.
						</aside>
					</section>


          <section>
						<h4>Solution - CERBERE</h4>

						<img class=fragment src="img/diag_before_vault.svg" height=300 />
						<span style="height: 300px" class=vertical-separator></span>
						<img class=fragment src="img/diag_after_vault.svg" height=300 />

						<aside class="notes">
							Projet CERBERE

							Image du problème à gauche
							Le secret est un mot de passe (compte de service)
							Les fleches représentent le trajet du secret
							On à un seul secret mais stocké à deux endroits différents
							deux endroits qui sont pas fait pour ça et sur lesquel on à peu
							de contrôle

							Image de la solution à droite
							fleches et secret toujours indiqués
							cette fois le secret est toujours à un endroit unique
							le secret peut être changé quand on veut et automatiquement
							les gens ont juste à s'authentifier à vault
						</aside>
          </section>


          <section style="text-align: center">
						<!-- TODO add a sentance -->
						<!-- TODO remove configuration -->
						<!-- TODO add token -->
						<div class="animation-parent">
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_after_vault_0.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out"
									 style="left: -37px">
								<img src="img/diag_after_vault_1.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_after_vault_2.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_after_vault_3.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_after_vault_4.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out"
									 style="left: -37px">
								<img src="img/diag_after_vault_5.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_after_vault_6.svg" height=500 />
							</div>
						</div>

						<aside class="notes">
							On va y revenir plus tard mais tout ce projet à été développé dans
							une ambiance agile.
						</aside>
          </section>


          <section>
						<h4>Methodes de développement</h4>

						<img src="img/scrum.svg" height=200 />

						<aside class="notes">
							On va y revenir plus tard mais tout ce projet à été développé dans
							une ambiance agile.
						</aside>
          </section>

        </section>


				<section>
					<h3>Problématique</h3>
					<!-- TODO -->

					<blockquote class=fragment>
						&ldquo; Comment les pratiques et technologies <strong
						class=stand-out>SRE</strong> permettent d'apporter un cadre sain et
						sécurisé nécessaire au déploiement d'une plateforme de <strong
						class=stand-out>coffre-fort numérique</strong> ?&rdquo;
					</blockquote>
					<!--
					<blockquote class=fragment>
						&ldquo; Quelles <strong class=stand-out>pratiques de développement
						</strong> et <strong class=stand-out>solutions techniques</strong>
						permettent d'apporter un cadre sain et sécurisé nécessaire au
						déploiement d'une plateforme de <strong class=stand-out>coffre-fort
						numérique</strong> ?&rdquo;
					</blockquote>
					-->

					<aside class=notes>
						Pour le reste de ce mémoire, nous allons nous concentrer sur une
						problématique plus restreinte *click*
						Cette problématique va nous permettre de parler de deux éléments
						qui me semble très importants pour le développement d'un projet de
						sécurité informatique. On parle d'abord de SRE et des méthodes
						agiles qui sont les fondations des méthodes de travail utilisés à la
						CT-Intégration. Ensuite on verra la sécurité du développement nomade
						qui à pris une toute nouvelle échelle depuis que la population
						mondial est forcé de travailler a distance.
					</aside>
				</section>


				<!-- PART 1 -->
				<section>

					<section>
						<h3>S. R. E.</h3>
						<ol>
							<li>Infrastructure As Code</li>
							<li>Tests Automatisés</li>
							<li>Intégration Continue</li>
							<li>Approche Produit</li>
						</ol>

						<aside class="notes">
							J'ai décidé de mettre sous le terme de SRE trois volets qui, je
							penses, montre le mieux la contribution de cette philosophie
							novatrice à la qualité et la sécurité d'un projet de gestion des
							secret. Ces trois volets ce sont trois grand concepts : ...
						</aside>
					</section>


					<section>
						<div style="float: left; text-align: left">
							<p>
								<strong class=stand-out>S</strong>
								<span class=fragment>ite</span>
							</p>
							<p>
								<strong class=stand-out>R</strong>
								<span class=fragment>reliability</span>
							</p>
							<p>
								<strong class=stand-out>E</strong>
								<span class=fragment>ngineering</span>
							</p>
						</div>

						<span class=fragment>
							<img class=fragment src="img/server_cluster.svg" width=200 />
							<span style="margin: 15px 50px" class=vertical-separator></span>
						</span>
						<img class=fragment src="img/devellopper_activity.svg" width=200 />

						<aside class="notes">
							Expliquons un peu la SRE, SRE c'est l'acronyme de .... qui se
							traduit en français par "Science de la fiabilité". C'est une
							méthode issue des équipes expérimentales de Google qui est très
							ancrée dans les pratiques DevOps.

							Les ingénieurs de google se sont dis: "et si je donnais la
							responsabilité de quelque chose d'aussi serieux que mes serveurs
							de production à des gens aussi superficiels que des développeurs".
						</aside>
					</section>


					<section>
						<table>
							<thead>
								<tr>
									<th> </th>
									<th style="text-align: center">+</th>
									<th style="text-align: center">-</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th>OPS</th>
									<td>Sécurité</td>
									<td>Lourdeur</td>
								</tr>
								<tr>
									<th>DEV</th>
									<td>Agilité</td>
									<td>Sécurité</td>
								</tr>
							</tbody>
						</table>

						<aside class="notes">
							En fait ils se sont rendu compte
							qu'ils avaient
							#
							D'un côté des équipes opérationnels très
							rigoureuses qui appliquaient des processus de management très
							rigides pour assurer une sécurité optimale mais que le grand
							nombre de processus et la grand responsabilité qui pesait sur eux
							était la cause de plus en plus de lenteurs, de coûts financiers et
							d'une dégradation des qualités de travail et du morale de ces
							équipes.
							#
							De l'autre côté, les développeurs de plus en plus tournés vers
							l'agile qui fournissaient des fonctionnalités innovantes et de
							façon de plus en plus dynamiques mais qui n'avait pas cette
							"culture de la production" et cette rigeur qui permettait de
							garantir une excellente sécurité.

 							Consitué des équipes hétérogènes de devs qui devaient trouver des
							solutions logiciels aux problèmes opérationnels habituels
						</aside>
					</section>

				</section>


				<section>

					<section>
						<h4 style="color: #e13b13">Infrastructure As Code</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Tests Automatisés</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Intégration / Déploiement Continue</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Approche Produit</h4>

						<aside class="notes">
							Pour moi un des concepte les plus important de ce mouvement c'est
							celui de "l"inforastructure as code"
						</aside>
					</section>


					<section>
						<h5>Concept</h5>

						<img class=fragment src="img/server_cluster.svg" width=200 />
						<span class=vertical-separator></span>
						<img class=fragment src="img/code_review.svg" width=200 />

						<aside class="notes">
							Le principe c'est d'abstraire les problématique système en
							proposant des outils et des syntax qui nous permettrons de décrire
							l'état d'une infrastructure
						</aside>
					</section>


					<section data-background="#444">
						<h5>Technologie</h5>

						<img src="img/ansible.png" height=200 />

						<aside class="notes">
							Pour l'infrastructure as code Cdiscount utilise de nombreuses
							technologies différentes mais dans notre cas c'est
							ansible un outil communautaire libre qui nous a été utile
						</aside>
					</section>


					<section>
						<h5>Fonctionnement</h5>

						<!-- TODO rond autour d'ansible -->
						<img src="img/diag_ansible.svg" height=400 />

						<aside class="notes">
							Ansible permet de définir l'infrastructure sous forme d'un
							ensemble de fichier yaml qu'on appel une recette. L'un d'eux
							contient un inventaire des machines ciblés par la recette, les
							autres sont un enchainement de tâches à appliqués qui peuvent être
							soumises à des conditions en fonction de variables d'entée de la
							recette. Ces tâches sont répartis dans des rôles qu'on appliques
							alors aux machines de l'inventaire.
						</aside>
					</section>


					<section>
						<h5>Jack</h5>

						<img src="img/screen_jack.png" width=700 />

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Inventaire</h5>

						<pre><code class="yaml"
											 data-trim
											 data-line-numbers="|5,6|7|15,23,31|39,40|41|49,57,65|73-76|77-84|"
											 style="font-size: 17px; line-height: 19px;">
							all:
								children:
									secrets:
										children:
											dc1:
												hosts:
													aa08srvcerfg001.cdweb.biz:
														cluster: A04NTNXAL001
														datacenter: DC1
														domain: cdweb.biz
														interface0network: LAN-RCT-1000
														interface1subnet: VLAN 146 - LDC
														os: Debian 10
														[...]
													aa08srvcervt001.cdweb.biz:
														cluster: A04NTNXAL001
														datacenter: DC1
														domain: cdweb.biz
														interface0network: LAN-RCT-1000
														interface1subnet: VLAN 146 - LDC
														os: Debian 10.4
														[...]
													aa08srvcervt002.cdweb.biz:
														cluster: A04NTNXAL001
														datacenter: DC1
														domain: cdweb.biz
														interface0network: LAN-RCT-1000
														interface1subnet: VLAN 146 - LDC
														os: Debian 10.4
														[...]
													aa08srvcervt003.cdweb.biz:
														cluster: A04NTNXAL001
														datacenter: DC1
														domain: cdweb.biz
														interface0network: LAN-RCT-1000
														interface1subnet: VLAN 146 - LDC
														os: Debian 10.4
														[...]
											dc2:
												hosts:
													aa08srvcerfg002.cdweb.biz:
														cluster: A02NTNXBW001
														datacenter: DC2
														domain: cdweb.biz
														interface0network: LAN-HPROD-1000
														interface1subnet: VLAN 146 - PAR
														os: Debian 10
														[...]
													aa08srvcervt004.cdweb.biz:
														cluster: A02NTNXBW001
														datacenter: DC2
														domain: cdweb.biz
														interface0network: LAN-HPROD-1000
														interface1subnet: VLAN 146 - PAR
														os: Debian 10.4
														[...]
													aa08srvcervt005.cdweb.biz:
														cluster: A02NTNXBW001
														datacenter: DC2
														domain: cdweb.biz
														interface0network: LAN-HPROD-1000
														interface1subnet: VLAN 146 - PAR
														os: Debian 10.4
														[...]
													aa08srvcervt006.cdweb.biz:
														cluster: A02NTNXBW001
														datacenter: DC2
														domain: cdweb.biz
														interface0network: LAN-HPROD-1000
														interface1subnet: VLAN 146 - PAR
														os: Debian 10.4
														[...]
											fragments:
												hosts:
													aa08srvcerfg001.cdweb.biz: {}
													aa08srvcerfg002.cdweb.biz: {}
											vault:
												hosts:
													aa08srvcervt001.cdweb.biz: {}
													aa08srvcervt002.cdweb.biz: {}
													aa08srvcervt003.cdweb.biz: {}
													aa08srvcervt004.cdweb.biz: {}
													aa08srvcervt005.cdweb.biz: {}
													aa08srvcervt006.cdweb.biz: {}
									ungrouped: {}
						</code></pre>

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Architecture de la solution</h5>
						<!-- TODO transition en zoom -->

						<img src="img/diag_vault_platform.svg" width=1000 />
					</section>


					<section>
						<h5>Répartition des rôles</h5>
						<!-- TODO expliciter instance vault, trop éclaté -->

						<div class="animation-parent" style="width: 700px">
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_0.svg" width=700 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_1.svg" width=700 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_2.svg" width=700 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_3.svg" width=700 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_4.svg" width=700 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_5.svg" width=700 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_instance_6.svg" width=700 />
							</div>
						</div>

						<aside class="notes">
							Rappelons rapidement l'architecture que l'on avait décrit dans
							vault. La plateforme est répartie sur 2 datacenter et des
							serveurs de fragments doivent nous permettre de dévérouiller le
							coffre fort
						</aside>
					</section>


					<section>
						<h5>Définition de l'infrastructure</h5>

						<pre><code class="ansible"
											 data-trim
								 			 data-line-numbers="|2,4,15,17|6-12|28,30|32-35|"
											 style="font-size: 17px; line-height: 19px;">
							---
							- hosts: "{{ groups['dc1'] | intersect(groups['vault']) }}"
								roles:
									- role: vault-server
										vars:
											ca_directory: /home/tristan/Desktop/vault_sandbox_ca/
											us_directory: /home/tristan/Desktop/vault_sandbox_us/
											secret_shares: 2
											secret_threshold: 1
											ha_endpoint: >-
												{{ hostvars[ansible_play_hosts[0]]
														['ansible_facts']['default_ipv4']['address'] }}


							- hosts: "{{ groups['dc2'] | intersect(groups['vault']) }}"
								roles:
									- role: vault-server
										vars:
											ca_directory: /home/tristan/Desktop/vault_sandbox_ca/
											us_directory: /home/tristan/Desktop/vault_sandbox_us/
											secret_shares: 2
											secret_threshold: 1
											ha_endpoint: >-
												{{ hostvars[ansible_play_hosts[0]]
														['ansible_facts']['default_ipv4']['address'] }}


							- hosts: fragment
								roles:
									- role: fragment-server
										vars:
											cacert: /home/tristan/Desktop/vault_sandbox_ca/ca.pem
											keys: >-
												{{ lookup('file', '/home/tristan/Desktop/vault_sandbox_us/keys')
												| from_json }}
							...
						</code></pre>

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Architecture du code</h5>

						<img src="img/diag_code_arch.svg" width=700 />

						<aside class="notes">
						</aside>
					</section>

				</section>


				<section>

					<section>
						<h4 style="color: #e13b13; opacity: 0.3">Infrastructure As Code</h4>
						<h4 style="color: #e13b13">Tests Automatisés</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Intégration / Déploiement Continue</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Approche Produit</h4>

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Concept</h5>

						<img src="img/online_test.svg" width=400 />

						<aside class="notes">
							Dans le monde opérationnel, nous sommes déjà habitué aux

							- tests de PRA
							- tests de sauvegarde
							- tests de performance même

							Mais le monde du développement logiciel est habitué a automatiser

							- tests de non régression
							- tests unitaires
							- tests d'acceptances
						</aside>
					</section>


					<section>
						<h5>Technologies</h5>

						<img src="img/molecule.png" width=200 />
						<span class=vertical-separator></span>
						<img src="img/docker.png" width=200 />

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Fonctionnement</h5>

						<img src="img/diag_molecule.svg" width=500 />

						<aside class="notes">
							molecule provisionne infra et joue recette contre infra
						</aside>
					</section>


					<section>
						<h5>Architecture du code</h5>

						<img src="img/diag_code_arch_test.svg" width=750 />
						<!--
						<div class="animation-parent" style="width: 1000px">
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_code_arch.svg" width=600 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_code_arch_test.svg" width=784 />
							</div>
						</div>
						-->

						<aside class="notes">
							on ajoute des répertoires
						</aside>
					</section>


					<section>
						<h5>Create</h5>

						<pre><code class="ansible"
											 data-trim
								 			 data-line-numbers="|4,5|7-13|14-20|21-27|"
											 style="font-size: 17px; line-height: 19px;">
							---
							dependency:
								name: galaxy
							driver:
								name: docker
							platforms:
								- name: fragment001
									groups: [ "fragment" ]
									image: docker-debian-systemd
									pre_build_image: true
									privileged: true
									volumes: [ "/sys/fs/cgroup:/sys/fs/cgroup:ro" ]
									command: "/lib/systemd/systemd"
								- name: vaultmock001
									groups: [ "vault" ]
									image: docker-debian-systemd
									pre_build_image: true
									privileged: true
									volumes: [ "/sys/fs/cgroup:/sys/fs/cgroup:ro" ]
									command: "/lib/systemd/systemd"
								- name: vaultmock002
									groups: [ "vault" ]
									image: docker-debian-systemd
									pre_build_image: true
									privileged: true
									volumes: [ "/sys/fs/cgroup:/sys/fs/cgroup:ro" ]
									command: "/lib/systemd/systemd"
							provisioner:
								name: ansible
							verifier:
								name: ansible
							...
						</pre></code>

						<aside class="notes">
							molecule provisionne infra et joue recette contre infra
						</aside>
					</section>


					<section>
						<h5>Converge</h5>

						<pre><code class="ansible"
											 data-trim
								 			 data-line-numbers="|7,17|19-27|"
											 style="font-size: 17px; line-height: 19px;">
							---
							- name: Converge CA
								hosts: all
								vars:
									ca_dir: "/tmp/molecule_fragment_ca/"
								tasks:
									- import_tasks: mock_ca.yml

							- name: Converge vault mocks
								hosts: vault
								vars:
									sslbase: "/etc/nginx/ssl/"
									ca_directory: "/tmp/molecule_fragment_ca/"
									certfile: "{{ ca_directory }}/{{ inventory_hostname }}.pem"
									keyfile: "{{ ca_directory }}/{{ inventory_hostname }}.key"
								tasks:
									- import_tasks: mock_vault.yml

							- name: Converge fragments
								hosts: fragment
								tasks:
									- name: "Include fragment"
										include_role:
											name: "fragment-server"
										vars:
											cacert: '/tmp/molecule_fragment_ca/ca.pem'
											keys: "{{ '[\"foo\"]' | from_json }}"
							...						</pre></code>

						<aside class="notes">
							on peut aller encore plus loin
						</aside>
					</section>


					<section>
						<h5>Test</h5>

						<pre><code class="ansible"
											 data-trim
								 			 data-line-numbers="|2|4-6|8,9|"
											 style="font-size: 17px; line-height: 19px;">
							- name: Verify vault unseal
								hosts: vault
								tasks:
									- name: Get nginx logs
										command: tail -n 1 /var/log/nginx/access.log
										register: nginx_log

									- assert:
											that: nginx_log.stdout is search("PUT /v1/sys/unseal .* 404")
					</pre></code>

						<aside class="notes">
							on peut aller encore plus loin
						</aside>
					</section>


					<section>
						<img src="img/diag_tdd.svg" width=700 />

						<aside class="notes">
							on peut aller encore plus loin
						</aside>
					</section>

				</section>


				<section>

					<section>
						<h4 style="color: #e13b13; opacity: 0.3">Infrastructure As Code</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Tests Automatisés</h4>
						<h4 style="color: #e13b13">Intégration / Déploiement Continue</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Approche Produit</h4>

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Concept</h5>

						<img src="img/continuous_integration.svg" width=300 />

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Technologies</h5>

						<img src="img/version_control.svg" width=400 />

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Fonctionnement</h5>

						<img src="img/diag_cicd.svg" width=400 />

						<aside class="notes">
							schema dev into test molecule into deploy ansible
						</aside>
					</section>


					<section>
						<h5>Pipline</h5>

						<img src="img/diag_pipline.svg" width=600 />

						<aside class="notes">
							BPM
						</aside>
					</section>


					<section>
						<h5>Architecture du code</h5>

						<img src="img/diag_code_arch_submodules.svg" width=800 />

						<aside class="notes">
							BPM
						</aside>
					</section>

				</section>


				<section>

					<section>
						<h4 style="color: #e13b13; opacity: 0.3">Infrastructure As Code</h4>
						<h4 style="color: #e13b13; opacity: 0.3">Tests Automatisés</h4>
						<h4 style="color: #e13b13; opacity: 0.3">
							Intégration / Déploiement Continue
						</h4>
						<h4 style="color: #e13b13">Approche Produit</h4>


						<aside class="notes">
							poussé par cdiscount très spécifiquement depuis cette année
						</aside>
					</section>


					<section>
						<h5>Concept</h5>

						<img src="img/product.svg" height="300" />

						<aside class="notes">
							de plus en plus courant
							vient de pair avec la démocratisation des méthodes agiles
							souvent en opposition avec l'approche projet jugé trop vieille
							est plus proche de agile par sont approche continue et iterative
							une équipe est en charge d'un produit plus de quelques projets
							permet de la modularité
							c'est un mindset
							on traite un produit comme quelquechose qu'on veut vendre à
							l'exterieur
							permet de remettre le client au centre
							permet à cdiscount d'externaliser le produit AWSlike
						</aside>
					</section>


					<section>
						<h5>Technologies</h5>

						<img src="img/confluence.png" height="150" />
						<span class=vertical-separator></span>
						<img src="img/jira.png" height="150" />
						<span class=vertical-separator></span>
						<img src="img/docker.png" height="150" />

						<aside class="notes">
							technologies qui permettent la modularité et la gestion
							de périmettre
							tout ce qui est gestion projet et documentation jira / confluence
							mais chaque espace orienté autour d'un produit (page monithor)
							tout ce qui permet la modularité : docker, gestion des interfaces
						</aside>
					</section>


					<section>
						<h5>Fonctionnement</h5>

						<div class="animation-parent">
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_product_1.svg" height=500 />
							</div>
							<div class="animation-child fragment fade-in-then-out">
								<img src="img/diag_vault_product_2.svg" height=500 />
							</div>
						</div>

						<aside class="notes">
							pour appliquer cette approche produit on à voulu être distant du
							reste de l'infra, on traite cdiscount comme un client à qui on
							intègre un produit : vault
							ainsi, aptly séparé, container séparé, ...
							un max de documentation
							playbooks généralistes
						</aside>
					</section>


					<section>
						<h5>Architecture du code</h5>

						<!--TODO ajouter légendes partout -->
						<img src="img/diag_code_arch_product.svg" height=500 />

						<aside class="notes">
							repos submodules indépendants
							roles testés unitairements
						</aside>
					</section>

				</section>


				<!-- PART 2
				<section>
					<h3>Sécurité du dévellopement nomade</h3>
					<ol>
						<li>Sécurité des supports</li>
						<li>Sécurité des échanges</li>
						<li>Sécurité du développement</li>
					</ol>

					<aside class="notes">
						covid à forcé à externaliser le développement
						1. chiffrement des disques
						2. VPN + mails chiffrés
						3. git++
					</aside>
				</section>


				<section>

					<section>
						<h4 style="color: #e13b13">Sécurité des supports</h4>

						<aside class="notes">
							2 types de supports :
							logiciels et materiels
						</aside>
					</section>


					<section>
						<h5>Supports logiciels</h5>

						<img src="img/confluence.png" height="150" />
						<span class=vertical-separator></span>
						<img src="img/jira.png" height="150" />
						<span class=vertical-separator></span>
						<img src="img/gitbucket.png" height="150" />

						<aside class="notes">
							confluence
							jira
							gitbucket
							approche produit : ouvert à l'implementation et fermé à la
							modification
						</aside>
					</section>


					<section>
						<h5>Supports materiels</h5>
						<br>

						<div class=layer>
							<p>Système d'exploitation</p>
						</div>
						<div class=layer>
							<p>Système de fichier</p>
						</div>
						<div class=layer-luks>
							<img src="img/luks.png" height="100" />
						</div>
						<div class=layer>
							<p>Disque</p>
						</div>

						<aside class="notes">
							comme vault, les disques des machines sont chiffrés
						</aside>
					</section>

				</section>


				<section>

					<section>
						<h4 style="color: #e13b13">Sécurité des échanges</h4>

						<aside class="notes">
						</aside>
					</section>


					<section>
						<h5>Sécurité superficielle</h5>

						<p style="color: green">TODO : add screens</p>

						<aside class="notes">
							utilisation de vpn
						</aside>
					</section>


					<section>
						<h5>Sécurité en profondeur</h5>

						<p style="color: green">TODO : add screens</p>

						<aside class="notes">
							mails chiffrés
						</aside>
					</section>

				</section>


				<section>

					<section>
						<h4 style="color: #e13b13">Sécurité des processus</h4>

						<aside class="notes">
							- Processus de Développement
							- Processus de Déploiement
							outil de control de version déjà utile de base mais indispensable
							dans ces conditions
							on va voir que SRE aide grandement cette partie
						</aside>
					</section>


					<section>
						<h5>Processus de développement</h5>

						<p style="color: green">TODO : add scheme</p>
						<p style="color: green">TODO : add asciiart</p>

						<aside class="notes">
							utilisation des branches git (#SRE)
						</aside>
					</section>


					<section>
						<h5>Processus de Déploiement</h5>

						<p style="color: green">TODO : add scheme</p>

						<aside class="notes">
							inspiration ITIL => changes
							utilisation de la CICD va améliorer ça
						</aside>
					</section>

				</section>
				-->

 
				<!-- CONCLUSION -->
				<section>
					<h3>Conclusion</h3>

					<aside class="notes">
					</aside>
				</section>

			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			Reveal.initialize({
				hash: true,
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
